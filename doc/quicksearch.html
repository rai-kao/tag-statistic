<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"filter.js.html":{"id":"filter.js.html","title":"Source: filter.js","body":" TAG STATISTIC Classes Filter Source: filter.js 'use strict'; var fs = require('fs'); var cheerio = require('cheerio'); var sprintf = require(&quot;sprintf-js&quot;).sprintf; var stream = require('stream'); var util = require('util'); var Readable = require('stream').Readable; var Writable = require('stream').Writable; //load default rules var defaultRules = require(&quot;../config/default.json&quot;); var condition = require('./condition'); /** * Creates a new Filter object. * @class Parser * @constructor * @param {Configuration|string} config A valid configuration options object or configuration as a JSON string. * @param {string} [output=console] Type of output. Supported output types are console, file &amp; stream. For file type, result.txt will be created after successful execution. * @returns {Parser} * @since 0.0.1 * @example * * var Parser = require('parser'); * * var parser = new Parser({}, &quot;console&quot;); * * parser.parseFile(&quot;home.html&quot;); * * */ function Filter(output, config = {}) { if (typeof config === &quot;string&quot;) config = JSON.parse(config); let defaultSettings = JSON.parse(JSON.stringify(defaultRules)); var self = this; this.settings = Object.keys(config).length !== 0 ? config : defaultSettings; this.settings.output = (output == undefined || output == null ? &quot;console&quot; : output); if (this.settings.output == &quot;stream&quot;) { this._outputReadStream; //stream on which result will be written, outputWriteStream will pipe the data this._outputWriteStream = this._createWritableStream(); /** @property {Object} outputWriteStream Writable node stream on which output will be written. @readonly **/ Object.defineProperty(this, 'outputWriteStream', { get: function() { return self._outputWriteStream; } }); } } Filter.prototype._createWritableStream = function() { this._outputReadStream = new Readable({ objectMode: true, read() {} }); var wStream = new Writable({ objectMode: true, write: (data, _, done) =&gt; { //write on console by default, user need to override write console.log(data); done(); } }); this._outputReadStream.pipe(wStream); return wStream; } Filter.prototype._parseHTML = function(html) { var $ = cheerio.load(html, { normalizeWhitespace: true, xmlMode: true, lowerCaseTags: true, lowerCaseAttributeNames: true }); return $; } /** * Parse HTML. * @method parse * @public * @param {string} html - HTML content. * @memberof Parser.prototype * @since 0.0.1 */ Filter.prototype.parse = function(html) { var self = this; var elements = this._parseHTML(html); let count = []; this.settings.filters.forEach(con =&gt; { if (con.isEnabled) { try { count.push(condition.parse(elements, con)); }catch (err) { con.isEnabled = false; } } }); this.results = count; } Filter.prototype.getSettings = function() { return this.settings; } Filter.prototype.setSettings = function(config) { if (typeof config === &quot;string&quot;) config = JSON.parse(config); this.settings = config; } Filter.prototype.returnResult = function() { var self = this; var _fnOutputString = function() { var str = &quot;&quot;; self.results.forEach(rule =&gt; { rule.forEach(ret =&gt; { if (ret.errorCount &gt; 0) { str += ret.errorMessage + '\\n'; } }) }); return str; } if (this.settings.output == &quot;console&quot;) { console.log(_fnOutputString()); } else if (this.settings.output == &quot;text&quot;) { //for tests return _fnOutputString(); } else if (this.settings.output == &quot;stream&quot;) { this._outputReadStream.push(_fnOutputString()); } else { //write file var fileName = this.settings.outputFile ? this.settings.outputFile : &quot;result.txt&quot;; fs.writeFile(fileName, _fnOutputString(), function (err) { if (err) { return console.log(err); } console.log(sprintf(&quot;Parsed HTML and saved output in %s file&quot;, fileName)); }); } } /** * Parse HTML file. * @method parseFile * @public * @param {string} file - Valid disk path of an HTML file. * @memberof Parser.prototype * @since 0.0.1 */ Filter.prototype.parseFile = function(file) { var self = this; fs.readFile(file, function read(err, data) { if (err) { console.log(&quot;Invalid file path&quot;); return; } self.parse(data.toString().replace((/ |\\r\\n|\\n|\\r/gm),&quot;&quot;)); //replace newlines and tabs self.returnResult(); }); } /** * Parse HTML from stream. * @method parseStream * @public * @param {Object} stream - Valid node readable stream. * @memberof Parser.prototype * @since 0.0.1 */ Filter.prototype.parseStream = function(stream) { if (typeof stream !== &quot;object&quot; &amp;&amp; typeof stream.on !== &quot;function&quot;) { return console.log(&quot;Invalid stream object&quot;); } var self = this; stream.on('data', function (buf) { self.parse(buf.toString().replace((/ |\\r\\n|\\n|\\r/gm),&quot;&quot;)); //replace newlines and tabs }); stream.on('end', function () { self.returnResult(); }); } module.exports = Filter; × Search results Close Documentation generated by JSDoc 3.6.6 on Sun Feb 7th 2021 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" TAG STATISTIC Classes Filter Classes Classes Filter × Search results Close Documentation generated by JSDoc 3.6.6 on Sun Feb 7th 2021 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" TAG STATISTIC Classes Filter Tag Statistic Node.js package to parse HTML and show rule defects Installation Install Tag Statistic globally using npm: npm install -g tag-statistic To install the latest version on npm locally and save it in your package's package.json file: npm install --save-dev tag-statistic Usage &amp; Examples var Filter = require('tag-statistic'); //simple HTML file parsing and printing defects on console var filter = new Filter(&quot;console&quot;); filter.parseFile(&quot;home.html&quot;); //input stream and parse data by reading stream. Print results on console var fs = require('fs'); var filter = new Filter(&quot;console&quot;); var s = fs.createReadStream(&quot;home.html&quot;); filter.parseStream(s); //simple HTML file parsing and write result in output file var filter = new Filter(&quot;file&quot;); var settings = filter.getSettings(); settings.outputFile = &quot;output.txt&quot;; filter.setSettings(settings); filter.parseFile(&quot;home.html&quot;); //simple HTML file parsing and get result on write stream var filter = new Filter(&quot;stream&quot;); var wStream = filter.outputWriteStream; wStream.write = function(data, _, done) { console.log(data); done(); } filter.parseFile(&quot;home.html&quot;); //Disable, Override, Define new rules and match conditions var filter = new Filter(&quot;console&quot;); var settings = filter.getSettings(); settings.filters[0].isEnabled = false; //disable default rule settings.filters[3].rules[0].condition[0].args = 3; //Overwrite default rule settings.filters[3].rules[0].error = &quot;There are more than 3 &lt;strong&gt; tag in HTML&quot;; settings.filters.push( //add custom rule { &quot;isEnabled&quot;: true, &quot;rules&quot;: [ { &quot;parent&quot;: &quot;head&quot;, &quot;tag&quot;: &quot;meta&quot;, &quot;assessMode&quot;: &quot;batch&quot;, &quot;condition&quot;: [ { &quot;method&quot;: &quot;to.containSubset&quot;, &quot;args&quot;: [ { &quot;name&quot;: &quot;meta&quot;, &quot;attribs&quot;: { &quot;name&quot;: &quot;robots&quot; } } ] } ], &quot;error&quot;: &quot;&lt;head&gt; without &lt;meta name='robots'/&gt; tag&quot; }, ] }); filter.setSettings(settings); //apply new settings filter.parseFile(&quot;home.html&quot;); //Use your fully customized rules at first var filter = new Filter(&quot;console&quot;, { &quot;output&quot;: &quot;console&quot;, &quot;outputFile&quot;: &quot;result.txt&quot;, &quot;filters&quot;: [ { &quot;isEnabled&quot;: true, &quot;rules&quot;: [ { &quot;tag&quot;: &quot;a&quot;, &quot;assessMode&quot;: &quot;single&quot;, &quot;condition&quot;: [ { &quot;method&quot;: &quot;to.have.deep.property&quot;, &quot;args&quot;: &quot;attribs.href&quot; }, { &quot;method&quot;: &quot;that.is.not.match&quot;, &quot;args&quot;: /^#/ } ], &quot;error&quot;: &quot;There are %d &lt;a&gt; tag with # URLs&quot; } ] } ] }); filter.parseFile(&quot;home.html&quot;); Development Copy git repository and run: npm install This should setup development environment. Once satisfied with code changes, update tests and run: npm test To update the documentation, edit jsDoc comments and run: npm run-script doc License MIT × Search results Close Documentation generated by JSDoc 3.6.6 on Sun Feb 7th 2021 using the DocStrap template. "},"Filter.html":{"id":"Filter.html","title":"Class: Filter","body":" TAG STATISTIC Classes Filter Class: Filter Filter Parser new Filter(config [, output]) Creates a new Filter object. Parameters: Name Type Argument Default Description config Configuration | string A valid configuration options object or configuration as a JSON string. output string &lt;optional&gt; console Type of output. Supported output types are console, file &amp; stream. For file type, result.txt will be created after successful execution. Since: 0.0.1 Source: filter.js, line 32 Returns: Type Parser Example var Parser = require('parser'); var parser = new Parser({}, &quot;console&quot;); parser.parseFile(&quot;home.html&quot;); × Search results Close Documentation generated by JSDoc 3.6.6 on Sun Feb 7th 2021 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
